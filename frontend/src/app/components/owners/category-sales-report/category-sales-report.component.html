<app-sidebar></app-sidebar>
<div class="sales-report-container">
  <h2>ğŸ“Š Category Sales Report</h2>

  <!-- ğŸ” Search Section -->
  <div class="search-bar">
    <input type="date" [(ngModel)]="selectedDate" placeholder="Select Date">
    <input type="text" [(ngModel)]="selectedCategory" placeholder="Enter category (optional)">
    <input type="text" [(ngModel)]="selectedItem" placeholder="Enter item (optional)">
    <button (click)="fetchSalesReport()">ğŸ” Search</button>
  </div>

  <!-- ğŸ“‚ Filter Buttons -->
  <div class="filter-buttons">
    <button (click)="fetchDailySalesReport()">ğŸ“… Daily Sales</button>
    <button (click)="fetchCategorySalesReport()">ğŸ“¦ Category Sales</button>
    <button (click)="fetchItemSalesReport()">ğŸ½ Item Sales</button>
  </div>

  <!-- ğŸš¨ Error Message -->
  <p *ngIf="errorMessage" class="error-message">âš ï¸ {{ errorMessage }}</p>

  <!-- ğŸ­ Sales Report Cards -->
  <div class="sales-cards" *ngIf="salesData">
    <div class="sales-card">
      <h3>ğŸ“… Date: {{ selectedDate }}</h3>

      <!-- âœ… Category Information -->
      <h3 *ngIf="selectedCategory">ğŸ“¦ Category: {{ selectedCategory }}</h3>
      <h3 *ngIf="selectedItem">ğŸ½ Item: {{ selectedItem }}</h3>

      <!-- âœ… Display Total Revenue -->
      <h4>ğŸ’° Total Revenue: â‚¹{{ totalRevenue }}</h4>

      <!-- âœ… Display Sales Data -->
      <div *ngFor="let data of salesData">
        <div *ngFor="let item of data.items" class="sales-item">
          <p><strong>ğŸ½ Item:</strong> {{ item.itemName }}</p>
          <p><strong>ğŸ“¦ Quantity Sold:</strong> {{ item.quantitySold }}</p>
          <p><strong>ğŸ’° Revenue:</strong> â‚¹{{ item.totalRevenue }}</p>
        </div>
      </div>
    </div>
  </div>

  <!-- ğŸš¨ No Sales Data -->
  <p *ngIf="!salesData && !isLoading" class="no-sales">No sales data available.</p>

  <!-- â³ Loading Spinner -->
  <div *ngIf="isLoading" class="loading-spinner">â³ Loading...</div>
</div>